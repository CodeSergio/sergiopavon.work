---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';
import portrait from '../../assets/retrato.png';
import { cv } from '../../data/cv';

const LINKEDIN_URL = 'https://www.linkedin.com/in/sergio-maximiliano-pav%C3%B3n-364a9a97/';
---

<BaseLayout title="CV | Sergio Maximiliano Pavón" description="Currículum vitae de Sergio Maximiliano Pavón (Oracle PL/SQL Backend Developer).">
  <header class="grid gap-6 md:grid-cols-[180px_1fr] md:items-start">
    <div>
      <Image
        src={portrait}
        alt="Retrato de Sergio Maximiliano Pavón"
        widths={[180, 240]}
        sizes="(max-width: 768px) 180px, 180px"
        class="aspect-square w-[180px] rounded-2xl border border-[var(--border)] bg-[var(--card)] object-cover shadow-sm"
      />
    </div>
    <div class="space-y-3">
      <h1 class="font-display text-4xl leading-tight">{cv.name}</h1>
      <p class="text-[var(--muted)]">{cv.headline} • {cv.location}</p>
      <div class="flex flex-wrap gap-2">
        <a class="btn btn-secondary" href={LINKEDIN_URL} target="_blank" rel="noreferrer">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            width="18"
            height="18"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M4 4h16v16H4z" />
            <path d="M7.5 10v7" />
            <path d="M7.5 7.5h.01" />
            <path d="M11 17v-4.2c0-1.6 1-2.6 2.3-2.6c1.4 0 2.2 1 2.2 2.6V17" />
            <path d="M11 10v7" />
          </svg>
          LinkedIn
        </a>
        <a class="btn btn-secondary" href="/CV.pdf" target="_blank" rel="noreferrer">Descargar PDF</a>
        <a class="btn btn-secondary" href="/cv/texto">Versión en texto</a>
        <a class="btn btn-secondary" href="/Sergio-Maximiliano-Pavon-CV.txt" target="_blank" rel="noreferrer">Descargar TXT</a>
      </div>
    </div>
  </header>

  <section class="mt-10" aria-label="Perfil profesional">
    <h2 class="font-display text-2xl">Perfil profesional</h2>
    <div class="mt-4 space-y-3 text-[var(--muted)]">
      {cv.profile.map((p) => (
        <p>{p}</p>
      ))}
    </div>
  </section>

  <section class="mt-10 grid gap-8 md:grid-cols-2" aria-label="Competencias">
    <div>
      <h2 class="font-display text-2xl">Competencias técnicas</h2>
      <ul class="mt-4 flex flex-wrap gap-2">
        {cv.skills.map((s) => (
          <li class="rounded-full border border-[var(--border)] bg-[var(--card)] px-3 py-1 text-sm">{s}</li>
        ))}
      </ul>
    </div>
    <div>
      <h2 class="font-display text-2xl">Especialidades</h2>
      <ul class="mt-4 list-disc pl-5 text-[var(--muted)]">
        {cv.specialties.map((sp) => (
          <li>{sp}</li>
        ))}
      </ul>
    </div>
  </section>

  <section class="mt-10" aria-label="Experiencia">
    <h2 class="font-display text-2xl">Experiencia</h2>
    <div class="mt-4 grid gap-4">
      {cv.experience.map((role) => (
        <article class="rounded-2xl border border-[var(--border)] bg-[var(--card)] p-5">
          <header class="flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between">
            <h3 class="font-display text-xl">{role.title}</h3>
            <p class="text-xs tracking-wide text-[var(--muted)]">{role.start} - {role.end}</p>
          </header>
          <p class="mt-1 text-sm text-[var(--muted)]">{role.company}</p>
          <ul class="mt-3 list-disc pl-5 text-sm text-[var(--muted)]">
            {role.bullets.map((b) => (
              <li>{b}</li>
            ))}
          </ul>
        </article>
      ))}
    </div>
  </section>

  <section class="mt-10 grid gap-8 md:grid-cols-2" aria-label="Formación y certificaciones">
    <div>
      <h2 class="font-display text-2xl">Formación académica</h2>
      <ul class="mt-4 grid gap-3">
        {cv.education.map((e) => (
          <li class="rounded-2xl border border-[var(--border)] bg-[var(--card)] p-4">
            <p class="font-medium">{e.title}</p>
            <p class="text-sm text-[var(--muted)]">{e.institution}{e.details ? ` • ${e.details}` : ''}</p>
          </li>
        ))}
      </ul>
    </div>
    <div>
      <h2 class="font-display text-2xl">Certificaciones</h2>
      <ul class="mt-4 grid gap-2">
        {cv.certifications.map((c) => (
          <li>
            <a class="link" href={c.url} rel="noreferrer" target="_blank">{c.label}</a>
          </li>
        ))}
      </ul>
    </div>
  </section>
</BaseLayout>
