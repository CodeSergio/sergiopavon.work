---
import ThemeToggle from './ThemeToggle.astro';

const pathname = Astro.url.pathname;
const isActive = (href: string) => pathname === href || pathname.startsWith(`${href}/`);

const LINKEDIN_URL = 'https://www.linkedin.com/in/sergio-maximiliano-pav%C3%B3n-364a9a97/';
---

<header class="sticky top-0 z-20 border-b border-[var(--border)] bg-[color-mix(in_oklab,var(--bg)_92%,transparent)] backdrop-blur">
  <div class="mx-auto max-w-5xl px-5">
    <div class="relative flex items-center justify-between py-4">
      <a
        href="/"
        class="font-display text-lg font-bold tracking-[0.06em] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[var(--focus)] sm:text-xl"
        aria-label="Inicio"
      >
        <span class="text-[var(--fg)]">SERGIOPAVON.</span><span class="text-[var(--accent)]">WORK</span>
      </a>

      <div class="flex items-center gap-2">
        <nav aria-label="Principal" class="hidden items-center gap-2 sm:flex">
          <a class="btn btn-secondary" href="/blog" aria-current={isActive('/blog') ? 'page' : undefined}>Blog IA</a>
          <a class="btn btn-secondary" href="/proyectos" aria-current={isActive('/proyectos') ? 'page' : undefined}>Proyectos</a>
          <a class="btn btn-secondary" href="/cv" aria-current={isActive('/cv') ? 'page' : undefined}>CV</a>
        </nav>

        <a class="hidden sm:inline-flex icon-btn" href={LINKEDIN_URL} target="_blank" rel="noreferrer" aria-label="LinkedIn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            width="18"
            height="18"
            fill="none"
            stroke="currentColor"
            stroke-width="1.8"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M4 4h16v16H4z" />
            <path d="M7.5 10v7" />
            <path d="M7.5 7.5h.01" />
            <path d="M11 17v-4.2c0-1.6 1-2.6 2.3-2.6c1.4 0 2.2 1 2.2 2.6V17" />
            <path d="M11 10v7" />
          </svg>
        </a>

        <ThemeToggle />

        <details class="relative sm:hidden">
          <summary class="icon-btn list-none" aria-label="Abrir menú">
            <span class="sr-only">Menú</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="18"
              height="18"
              fill="none"
              stroke="currentColor"
              stroke-width="1.8"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
            >
              <path d="M4 7h16" />
              <path d="M4 12h16" />
              <path d="M4 17h16" />
            </svg>
          </summary>

          <div class="absolute right-0 mt-2 w-64 rounded-2xl border border-[var(--border)] bg-[var(--bg)] p-2">
            <nav aria-label="Menú" class="grid gap-2">
              <a class="btn btn-secondary w-full justify-start" href="/blog">Blog IA</a>
              <a class="btn btn-secondary w-full justify-start" href="/proyectos">Proyectos</a>
              <a class="btn btn-secondary w-full justify-start" href="/cv">CV</a>
              <a class="btn btn-secondary w-full justify-start" href={LINKEDIN_URL} target="_blank" rel="noreferrer">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  width="18"
                  height="18"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.8"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                >
                  <path d="M4 4h16v16H4z" />
                  <path d="M7.5 10v7" />
                  <path d="M7.5 7.5h.01" />
                  <path d="M11 17v-4.2c0-1.6 1-2.6 2.3-2.6c1.4 0 2.2 1 2.2 2.6V17" />
                  <path d="M11 10v7" />
                </svg>
                LinkedIn
              </a>
            </nav>
          </div>
        </details>
      </div>
    </div>
  </div>
</header>
